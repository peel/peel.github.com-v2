<style>
 .languagesBox {
     color: #3b3b3b !important;
 }
 languages{
     display:block;
     width:100%;
     height:2px;
     margin:0.2em 0 0 0;
 }
 language{
     float:left;
     display:block;
     margin:0;
     padding:0;
     height:100%;
 }
 text{
     float:left;
     display:block;
     margin:3px 0 0 0;
     padding:0;
     height:100%;
     text-align: center;
     font-size: 12px;
     font-weight: 500;
     line-height: 33px;
 }
</style>
<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
 var default_data = {"jsonapi":{"version":"1.0"},"data":[{"type":"language","id":"61315d3a-67a1-40ec-873f-ead147771904","attributes":{"percent":56.83,"name":"Scala","id":"61315d3a-67a1-40ec-873f-ead147771904"}},{"type":"language","id":"00f7c6f4-cfcd-418e-988f-8439c288481c","attributes":{"percent":32.67,"name":"Emacs Lisp","id":"00f7c6f4-cfcd-418e-988f-8439c288481c"}},{"type":"language","id":"a26d51d7-b734-47f7-9436-b18d72e30231","attributes":{"percent":5.16,"name":"Other","id":"a26d51d7-b734-47f7-9436-b18d72e30231"}},{"type":"language","id":"7fb3cd26-0f7e-4aa4-871a-8a716ad7c19a","attributes":{"percent":3.63,"name":"Org-mode","id":"7fb3cd26-0f7e-4aa4-871a-8a716ad7c19a"}},{"type":"language","id":"5235500e-ec68-4665-b222-ff1d0bfbe2bd","attributes":{"percent":1.71,"name":"Makefile","id":"5235500e-ec68-4665-b222-ff1d0bfbe2bd"}}]}
 var parse_data = function(api_data){ return api_data.data.map(function(d){return{name: d.attributes.name, percent: d.attributes.percent};});}
 var data = parse_data(default_data);
 $.ajax({
     url: '{{site.api.wakatime}}',
     data: {
         format: 'json-api'
     },
     dataType: 'jsonp',
     success: function(api_data) {
         data = parse_data(api_data);
     },
     type: 'GET'
 });
 var color = d3.scale.linear()
                     .domain([0, 5])
               .range(["#38B6AB", "#000"]);
 var languagesContainer = d3.select("languages");
 var languages = languagesContainer.selectAll("language")
                                   .data(data)
                                   .enter()
                                   .append("language")
                                   .style("width",function(lang){return lang.percent + "%";})
                                   .style("background-color", function(d, i) { return color(i); });
 var names = languagesContainer.selectAll("text")
                               .data(data)
                               .enter()
                               .append("text")
                               .style("width",function(lang){return 100/data.length + "%";})
                               .text(function(lang){return lang.name + " " + lang.percent + "%";});
</script>
